#!/bin/bash
#seed me daddy
generate_post_data()
{
 cat <<EOF 
    {
  "user": {
    "site": "asd",
    "province": "asd"
    }
  }
EOF
}

echo '[ * ] Processing parameters for payload retrieval'

read -e -p "Type your Facility / RHU Name (e.g. San Jose RHU): " SITE
read -e -p "Type your Province (e.g. pangasinan): " PROV
#GET EVERYTHING; STATUS; SIZE OF DISK; IP ADDRESS;


echo '[ * ] Attempting to retrieve remote payload'

curl http://sql.wah.ph/alpha_branch/script_final > /var/tmp/feather



echo '[ * ] Executing payload'
echo > ~/log.txt
sh /var/tmp/feather | tee ~/log.txt


curl --header "Content-Type: application/json" \
  --request POST \
  --data "$(generatePostData)" \
 http://sync-pd01.sql.wah.ph/api/upd